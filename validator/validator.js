var Validator = {};Validator = function(){    var o = {};	var idName = '';    var tag = 'code';	var baStyle = '#e06419';	var parentTag = 'form';    var cls = 'class = "__ErrorMessagePanel"';    var style = 'style="color:red; padding-left:6px;';    var expr = {        "Require": /.+/,        "Email": /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,        "Phone": /^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/,        "Mobile": /^((\(\d{2,3}\))|(\d{3}\-))?1(3|5)\d{9}$/,        "Url": /((^http)|(^https)|(^ftp)):\/\/(\S)+\.(\w)+/,        "Currency": /^\d+(\.\d+)?$/,        "Number": /^\d+$/,        "Money" : /^[-\+]?\d{0,8}\.{0,1}(\d{1,2})?$/,        "Integer": /^[-\+]?\d+$/,        "Double": /^[-\+]?\d+(\.\d+)?$/,        "English": /^[A-Za-z]+$/,        "Chinese": /^[\u0391-\uFFE5]+$/,        "Username": /^[a-z]\w{3,}$/i,		"Date": /^((?!0000)[0-9]{4}-((0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-8])|(0[13-9]|1[0-2])-(29|30)|(0[13578]|1[02])-31)|([0-9]{2}(0[48]|[2468][048]|[13579][26])|(0[48]|[2468][048]|[13579][26])00)-02-29)$/    };    return {		verdict: function(obj){			o = obj;			var result = false;			var formStatus = $(o).parents(parentTag).attr('validator');			//禁用			if(formStatus == 'false'){				return;			}			idName = obj.attr('name');			var value = obj.val();			var maxN = obj.attr('max');			var key = obj.attr('datatype');			if (key && typeof(key) != "undefined") {				// 正则验证				if (this.getChecking(key, value) && value != obj.attr('msg')) {					// 长度验证					if (maxN && typeof(maxN) != "undefined") {						if(value.length >= maxN){							this.setErrorMessage();						}else{							this.delErrorMessage();							result = true;						}					}else{						this.delErrorMessage();						result = true;					}				} else {					this.setErrorMessage();				}			}else{				result = true;			}			return result;		},		verdictAll: function(id,option){			var result = true;			var formStatus = $('#'+id).attr('validator');			var fObj = $('#' + id + '').find(':text,select,textarea,:checkbox');			$('#'+id).attr('validator','true');            for (var i = 0; i < fObj.length; i++) {                if (!this.verdict(fObj.eq(i))) {                    result = false;                    if (o.attr('appoint') && typeof(o.attr('appoint'))) {                        return result;                    }                }            }			$('#'+id).attr('validator',formStatus);			if(!option){				return result;			}			if(result){				$('#'+id).submit();			}		},		multipleVerdict : function(obj,multiple){			o = obj;			var num = 1;			var result = false;			var value = obj.val();			if (value && typeof(value) != "undefined") {				if(value >= multiple){					num = value % multiple;				}				if(num == 0){					result = true;					this.delErrorMessage();				}else{					this.setErrorMessage();				}			}else{				this.setErrorMessage();			}			return result;		},		getChecking: function(key, value){			var result = false;			if (key) {				switch(key){					//AjaX重名					case 'NameAjax':					this.isNameAjax();					result = true;					break;					//多选					case 'Group':					result = this.isChecked();					break;					//范围判断					case 'Limit':					var min = parseInt(o.attr('min'));					var max = parseInt(o.attr('max'));					if(expr['Require'].test(value) && max >= value.length && min <= value.length){						result = true;					}					break;					//正则					default :					var r = expr[key];					if (r.test(value)) {						result = true;					}					break;				}			}			return result;		},		isNameAjax : function(){			var jsonArr = {};			var value = o.val();			var urlAjax = o.attr('url');			var idName = o.attr('name');			var id = o.attr('id');			if(typeof(id) == "undefined" && id != ''){				jsonArr = {name: value};			}else{				jsonArr = {name: value, id : id};			}			$.post(urlAjax, jsonArr,				function(data){					if (data) {						var obj = $('input[name="'+idName+'"]');						var msg = '<' + tag + ' id="error_'+idName+'" ' + cls + ' ' + style + '">' + data + '</' + tag + '>';						$(obj.parent()).append(msg);					}else{						$(obj.parent()).children(tag).remove();					}				});		},		getAjaxStatus : function(){			return o.attr('status');		},		isChecked : function(){			var result = false;			var checkTrueVal = $('input[name="'+idName+'"]:checked').val();			idName = idName.split('[]')[0];			if(checkTrueVal){				result = true;			}			return result;		},		setErrorMessage: function(){			if(o.attr('appoint') && typeof(o.attr('appoint'))){				var errId = o.attr('appoint');				$('#'+errId).show();				$('#'+errId).html(o.attr('msg'));			}else if(!$('#error_'+idName).html()){				var msg = '<' + tag + ' id="error_'+idName+'" ' + cls + ' ' + style + '">' + o.attr('msg') + '</' + tag + '>';				$(o.parent()).append(msg);			}		},		delErrorMessage: function(){			if (o.attr('appoint') && typeof(o.attr('appoint'))) {				var errId = o.attr('appoint');				$('#' + errId).hide();				$('#' + errId).html();			}			$(o.parent()).children(tag).remove();		},		getColor : function(n){			var result = '';			switch(n){				case 0:				result = baStyle;				break;			}			return result;		}	}}()/* 对比时间 *//* fairly : 开启自动变更结束时间  *//* fairlyId : 结束时间标签ID  *//* fairlyDay : 结束时间音隔天数（默认1天）  */function fairlyTime(o) {	/*	starttime  */	var id, obj, sTime, time, year, month, days, fairlyDay;	sTime = $(o).val();	id = $(o).attr('fairlyId');	fairlyDay = parseInt($(o).attr('fairlyDay'));	if(!fairlyDay || !typeof(fairlyDay)){		fairlyDay = 1;	}	if(sTime){		var timeA = sTime.split("-");		var timeB = $('#'+id).val().split("-");		var dateA = new Date(timeA[0],timeA[1]-1,timeA[2]);		var dateB = new Date(timeB[0],timeB[1]-1,timeB[2]);		time = new Date(dateA).getTime() + (1000 * 3600 * 24 * fairlyDay);		etime = new Date(dateB).getTime();		if(time > etime){			var obj = new Date(time);			year = obj.getFullYear();			month = obj.getMonth()+1;			if(month < 10){				month = '0'+month;			}			days = obj.getDate();			if(days < 10){				days = '0'+days;			}			$('#'+id).val(year+'-'+month+'-'+days);		}	}}$(document).ready(function(){    $('input,select,textarea').blur(function(){    	if($(this).attr('fairly') == 'yes'){			fairlyTime(this);		}        Validator.verdict($(this));    });});